<!-- pages/goals/create/create.wxml -->
<view class="create-container">
  <view class="header">
    <view class="title">{{isEdit ? '编辑目标' : '创建目标'}}</view>
    <view class="add-btn" bindtap="submitForm">{{isEdit ? '保存' : '添加'}}</view>
  </view>

  <view class="form-container">
    <t-form>
      <!-- 目标查找指南 -->
      <view class="guide-item" bindtap="goToGuide">
        <view class="guide-title">
          <text class="guide-icon">🎯</text>
          <text>定制自己的目标</text>
        </view>
      </view>

      <!-- 错误提示 -->
      <view wx:if="{{formError}}" class="error-message">
        <t-icon name="error-circle" size="36rpx" color="#e34d59"></t-icon>
        <text>{{formError}}</text>
      </view>

      <!-- 标题输入 -->
      <view class="form-item">
        <view class="form-label">目标名称</view>
        <view class="input-container">
          <view class="color-circle" style="background-color: {{selectedColor}}"></view>
          <input
            class="input-field"
            value="{{title}}"
            placeholder="如：生活杂事"
            bindinput="onTitleInput"
            maxlength="50"
          />
        </view>
      </view>

      <!-- 颜色选择 -->
      <view class="form-item">
        <view class="form-label">选择颜色</view>
        <view class="color-selector">
          <view 
            wx:for="{{colors}}" 
            wx:key="color" 
            class="color-item {{selectedColor === item.color ? 'selected' : ''}}"
            style="background-color: {{item.color}};"
            bindtap="selectColor"
            data-color="{{item.color}}"
          ></view>
        </view>
      </view>

      <!-- 日期范围选择 -->
      <view class="form-item">
        <view class="form-label">目标时间</view>
        <view class="date-picker-container">
          <picker mode="date" start="1970-01-01" end="2099-12-31" value="{{dateRange}}" bindchange="onDateRangeChange">
            <view class="picker-value">{{dateRange || '请选择日期'}}</view>
          </picker>
          <view class="date-picker-icon">📅</view>
          <view class="date-clear-btn" bindtap="clearDate" wx:if="{{dateRange}}">×</view>
          <text class="date-hint">{{durationDays}}天</text>
        </view>
      </view>
      <!-- 描述输入 -->
      <view class="form-item">
        <view class="form-label">目标描述</view>
        <view class="input-container">
          <textarea
            class="input-field"
            placeholder="请输入详细目标描述"
            bindinput="onDescriptionInput"
            maxlength="200"
            value="{{description}}"
            style="height: 120rpx;"
          />
        </view>
      </view>
    </t-form>

    <!-- 按钮区域 -->
    <view class="button-group">
      <button class="submit-btn" bindtap="submitForm">{{isEdit ? '保存修改' : '创建目标'}}</button>
    </view>
  </view>
</view>